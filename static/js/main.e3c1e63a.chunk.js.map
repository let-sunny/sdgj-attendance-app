{"version":3,"sources":["assets/images/sdgj_horizontal_logo.png","functions/User.js","components/Header.js","functions/Attendance.js","components/Calendar.js","context/FirebaseContext.js","App.js","serviceWorker.js","firebase-config.js","firebase.js","index.js"],"names":["module","exports","User","firebase","getUser","account","a","userRef","db","collection","doc","email","get","user","exists","data","console","log","setUser","set","createdAt","Date","getTime","name","displayName","isMember","imageUrl","photoURL","lastSignedIn","merge","this","Header","props","state","isFetching","setState","signIn","signOut","auth","onAuthStateChanged","phoneNumber","onClick","React","Component","Attendance","setAttendance","date","attendanceMemberRef","attendance","isDeleted","updatedAt","getAttendances","where","querySnapshot","empty","docs","map","id","Calendar","dateObject","moment","startX","key","weekdayShort","weekdaysShort","firstDayOfMonth","startOf","format","daysInMonth","Array","fill","num","i","month","year","onPrev","subtract","Promise","all","day","attendances","onNext","add","onAttend","d","currentUser","alert","years","months","Number","onTouchStart","e","targetTouches","clientX","onTouchEnd","currentX","changedTouches","Math","abs","isToday","today","isSame","isSunday","isSaturday","isHoliday","holidays","solar","find","holiday","weekdaysName","chineseWeekday","className","toUpperCase","blanks","classes","push","todayAttendance","join","type","totalCells","weeks","week","forEach","cell","length","weeksInMonth","src","Logo","alt","FirebaseContext","createContext","App","Consumer","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Firebase","signInWithRedirect","googleProvider","app","initializeApp","firestore","GoogleAuthProvider","ReactDOM","render","Provider","value","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"wHAAAA,EAAOC,QAAU,IAA0B,kD,yMC6C5BC,EA5Cd,WAAYC,GAAW,IAAD,gCAItBC,QAJsB,sCAIZ,WAAOC,GAAP,iBAAAC,EAAA,wDACJD,EADI,wDAGHE,EAAU,EAAKJ,SAASK,GAAGC,WAAW,SAASC,IAAIL,EAAQM,OAHxD,SAIUJ,EAAQK,MAJlB,UAIHC,EAJG,gBAMHA,EAAKC,OANF,0CAOA,MAPA,iCASAD,EAAKE,QATL,0DAYRC,QAAQC,IAAR,MAZQ,wDAJY,2DAoBtBC,QApBsB,sCAoBZ,WAAOb,GAAP,iBAAAC,EAAA,wDACJD,EADI,wDAGHE,EAAU,EAAKJ,SAASK,GAAGC,WAAW,SAASC,IAAIL,EAAQM,OAHxD,SAIUJ,EAAQK,MAJlB,UAIHC,EAJG,gBAMHA,EAAKC,OANF,kCAODP,EAAQY,IAAI,CACjBC,WAAW,IAAIC,MAAOC,UACtBC,KAAMlB,EAAQmB,aAAe,GAC7BC,UAAU,EACVC,SAAUrB,EAAQsB,UAAY,KAXxB,iDAcDpB,EAAQY,IAAI,CACjBS,cAAc,IAAIP,MAAOC,WACvB,CAAEO,OAAO,IAhBL,0DAmBRb,QAAQC,IAAR,MAnBQ,wDApBY,sDACrBa,KAAK3B,SAAWA,GCwDH4B,E,2MAtDd5B,SAAW,EAAK6B,MAAM7B,S,EACtB8B,MAAQ,CACPpB,KAAM,KACNqB,YAAY,G,EAObrB,K,sCAAO,WAAOA,GAAP,SAAAP,EAAA,qEACA,IAAIJ,EAAK,EAAKC,UAAUe,QAAQL,GADhC,OAEN,EAAKsB,SAAS,CACbtB,OACAqB,YAAY,IAJP,yC,wDAQPE,O,qBAAS,sBAAA9B,EAAA,8EAED,EAAKH,SAASiC,SAFb,sDAIPpB,QAAQC,IAAR,MAJO,sD,EAQToB,Q,qBAAU,sBAAA/B,EAAA,8EAEF,EAAKH,SAASkC,UAFZ,sDAIRrB,QAAQC,IAAR,MAJQ,sD,2MAnBHa,KAAK3B,SAASmC,KAAKC,mBAAmBT,KAAKjB,M,mIA2BxC,IAAD,OACR,OAAIiB,KAAKG,MAAMC,WACN,6BAAK,mCACHJ,KAAKG,MAAMpB,KAEpB,6BACC,2BAAIiB,KAAKG,MAAMpB,KAAKF,OAASmB,KAAKG,MAAMpB,KAAK2B,cAM9C,6BACC,4BAAQC,QAAS,kBAAM,EAAKL,WAA5B,qB,GAhDgBM,IAAMC,W,+mBCsCZC,EAxCd,WAAYzC,GAAW,IAAD,gCAItB0C,cAJsB,sCAIN,WAAOC,EAAMjC,GAAb,iBAAAP,EAAA,wDACVO,EADU,wDAETkC,EAAsB,EAAK5C,SAASK,GACxCC,WAAW,eAAeC,IAAIoC,GAC9BrC,WAAW,WAAWC,IAAIG,EAAKF,OAJlB,SAKUoC,EAAoBnC,MAL9B,UAKToC,EALS,gBAOTA,EAAWlC,OAPF,kCAQPiC,EAAoB5B,IAAI,CAC7BC,WAAW,IAAIC,MAAOC,UACtB2B,WAAW,IAVC,iDAaPF,EAAoB5B,IAAI,CAC7B8B,WAAYD,EAAWjC,OAAOkC,UAC9BC,WAAW,IAAI7B,MAAOC,WACpB,CAAEO,OAAO,IAhBC,0DAmBdb,QAAQC,IAAR,MAnBc,wDAJM,6DA2BtBkC,eA3BsB,sCA2BL,WAAOL,GAAP,mBAAAxC,EAAA,4DACVyC,EAAsB,EAAK5C,SAASK,GACxCC,WAAW,eAAeC,IAAIoC,GAAMrC,WAAW,WAAW2C,MAAM,YAAa,MAAM,GAFrE,SAGYL,EAAoBnC,MAHhC,WAGVyC,EAHU,QAIGC,MAJH,uBAKPC,EAASF,EAATE,KALO,kBAMRA,EAAKC,IAAI,SAAA9C,GAAG,YAAUA,EAAIK,OAAd,CAAsBJ,MAAOD,EAAI+C,QANrC,gCAQR,IARQ,0CA3BK,sDACrB3B,KAAK3B,SAAWA,GC2SHuD,E,2MArSdvD,SAAW,EAAK6B,MAAM7B,S,EAEtB8B,MAAQ,CACP0B,WAAYC,MACZC,OAAQ,KACRC,IAAK,G,EAGNC,aAAeH,IAAOI,gB,EAStBC,gBAAkB,WAAO,IAChBN,EAAe,EAAK1B,MAApB0B,WACR,OAAOC,IAAOD,GACZO,QAAQ,SACRC,OAAO,M,EAGVC,YAAc,WAAyC,IAAxCT,EAAuC,uDAA1B,EAAK1B,MAAM0B,WACtC,OAAO,IAAIU,MAAMV,EAAWS,eAAeE,KAAK,GAAGd,IAAI,SAACe,EAAKC,GAAN,OAAYA,EAAI,K,EAGxEC,MAAQ,WACP,OAAO,EAAKxC,MAAM0B,WAAWQ,OAAO,M,EAGrCO,KAAO,WACN,OAAO,EAAKzC,MAAM0B,WAAWQ,OAAO,M,EAGrCQ,O,qBAAS,8BAAArE,EAAA,4DACFqD,EAAa,EAAK1B,MAAM0B,WAAWiB,SAAS,EAAG,SAD7C,SAEkBC,QAAQC,IAAI,EAAKV,YAAYT,GAAYH,IAAI,SAACuB,GAAD,OAAS,EAAKC,YAAYD,MAFzF,OAEFC,EAFE,OAGR,EAAK7C,SAAS,CACbwB,WAAYA,EACZqB,gBALO,yC,EASTC,O,qBAAS,8BAAA3E,EAAA,4DACFqD,EAAa,EAAK1B,MAAM0B,WAAWuB,IAAI,EAAG,SADxC,SAEkBL,QAAQC,IAAI,EAAKV,YAAYT,GAAYH,IAAI,SAACuB,GAAD,OAAS,EAAKC,YAAYD,MAFzF,OAEFC,EAFE,OAGR,EAAK7C,SAAS,CACbwB,WAAYA,EACZqB,gBALO,yC,EASTG,S,sCAAW,WAAOC,GAAP,uBAAA9E,EAAA,qEACY,EAAKH,SAASmC,KAAK+C,YAD/B,cACJhF,EADI,gBAES,IAAIH,EAAK,EAAKC,UAAUC,QAAQC,GAFzC,UAEJQ,EAFI,OAILR,GAAYQ,GAASA,EAAKY,SAJrB,iBAKT6D,MAAM,+BALG,+BAOD3B,EAAe,EAAK1B,MAApB0B,WACFb,EAAOc,IAAO,CACnB2B,MAAO5B,EAAWQ,OAAO,KACzBqB,OAAQC,OAAO9B,EAAWQ,OAAO,OAAO,EACxCrB,KAAMsC,IACJjB,OAAO,YAZD,UAaH,IAAIvB,EAAW,EAAKzC,UAAU0C,cAAcC,EAAMzC,GAb/C,yBAciBwE,QAAQC,IAAI,EAAKV,cAAcZ,IAAI,SAACuB,GAAD,OAAS,EAAKC,YAAYD,MAd9E,QAcHC,EAdG,OAeT,EAAK7C,SAAS,CACb6C,gBAhBQ,0C,wDAqBXU,aAAe,SAACC,GACf,EAAKxD,SAAS,CACb0B,OAAQ8B,EAAEC,cAAc,GAAGC,W,EAI7BC,WAAa,SAACH,GAAO,IACZ9B,EAAW,EAAK5B,MAAhB4B,OACFkC,EAAWJ,EAAEK,eAAe,GAAGH,QACjCI,KAAKC,IAAIH,EAAWlC,GAAW,MAClCkC,EAAWlC,EAAS,EAAI,EAAKc,SAAW,EAAKM,UAE9C,EAAK9C,SAAS,CACb0B,OAAQ,Q,EAIVsC,QAAU,SAACf,GAAO,IACTzB,EAAe,EAAK1B,MAApB0B,WACFoB,EAAMnB,IAAO,CAClB2B,MAAO5B,EAAWQ,OAAO,KACzBqB,OAAQC,OAAO9B,EAAWQ,OAAO,OAAO,EACxCrB,KAAMsC,IAEDgB,EAAQxC,MAASO,OAAO,cAC9B,QAASY,EAAIsB,OAAOD,I,EAGrBE,SAAW,SAAClB,GAAO,IACVzB,EAAe,EAAK1B,MAApB0B,WAMR,OAAe,IALHC,IAAO,CAClB2B,MAAO5B,EAAWQ,OAAO,KACzBqB,OAAQC,OAAO9B,EAAWQ,OAAO,OAAO,EACxCrB,KAAMsC,IACJL,O,EAIJwB,WAAa,SAACnB,GAAO,IACZzB,EAAe,EAAK1B,MAApB0B,WAMR,OAAe,IALHC,IAAO,CAClB2B,MAAO5B,EAAWQ,OAAO,KACzBqB,OAAQC,OAAO9B,EAAWQ,OAAO,OAAO,EACxCrB,KAAMsC,IACJL,O,EAIJyB,UAAY,SAACpB,GAAO,IACXzB,EAAe,EAAK1B,MAApB0B,WAEF8C,EAAW,CAEhB7C,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAAI4D,QAClD9C,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAAI4D,QAAQ9B,SAAS,EAAG,OACtEhB,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAAI4D,QAAQxB,IAAI,EAAG,OAEjEtB,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,KAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,KAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,KAAK4D,QACnD9C,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,KAAK4D,QAAQ9B,SAAS,EAAG,OACvEhB,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,KAAK4D,QAAQxB,IAAI,EAAG,OAElEtB,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,EAAG1C,KAAM,IAE9Cc,IAAO,CAAE2B,MAAO,EAAKb,OAAQc,OAAQ,GAAI1C,KAAM,MAE1CiC,EAAMnB,IAAO,CAClB2B,MAAO5B,EAAWQ,OAAO,KACzBqB,OAAQC,OAAO9B,EAAWQ,OAAO,OAAO,EACxCrB,KAAMsC,IAEP,QAASqB,EAASE,KAAK,SAACC,GAAD,OAAaA,EAAQP,OAAOtB,M,EAGpDC,Y,sCAAc,WAAOI,GAAP,mBAAA9E,EAAA,4DACLqD,EAAe,EAAK1B,MAApB0B,WACFb,EAAOc,IAAO,CACnB2B,MAAO5B,EAAWQ,OAAO,KACzBqB,OAAQC,OAAO9B,EAAWQ,OAAO,OAAO,EACxCrB,KAAMsC,IACJjB,OAAO,YANG,SAOa,IAAIvB,EAAW,EAAKzC,UAAUgD,eAAeL,GAP1D,cAOPkC,EAPO,wCASXlC,EAAOkC,IATI,yC,8QAvJaH,QAAQC,IAAIhD,KAAKsC,cAAcZ,IAAI,SAACuB,GAAD,OAAS,EAAKC,YAAYD,M,OAAjFC,E,OACNlD,KAAKK,SAAS,CACb6C,gB,mIAkKQ,IAAD,OACJ6B,EAAe/E,KAAKiC,aAAaP,IAAI,SAACuB,EAAKP,GAC9C,IAAIsC,EAAiB,GACrB,OAAQtC,GACP,KAAK,EACJsC,EAAiB,SACjB,MACD,KAAK,EACJA,EAAiB,SACjB,MACD,KAAK,EACJA,EAAiB,SACjB,MACD,KAAK,EACJA,EAAiB,SACjB,MACD,KAAK,EACJA,EAAiB,SACjB,MACD,KAAK,EACJA,EAAiB,SACjB,MACD,KAAK,EACJA,EAAiB,SAKnB,OACC,wBAAIhD,IAAKiB,EAAKgC,UAAU,qBACvB,uBAAGA,UAAU,MAAMD,GACnB,uBAAGC,UAAU,MAAMhC,EAAIiC,kBAKpBC,EAAS,IAAI5C,MAAMoB,OAAO3D,KAAKmC,oBAAoBK,KAAK,GAAGd,IAAI,SAACe,EAAKC,GAC1E,OACC,wBAAIV,IAAG,gBAAWU,GAAKuC,UAAU,sBAAsB,MAInD3C,EAActC,KAAKsC,cAAcZ,IAAI,SAAAuB,GAE1C,IAAMmC,EAAU,CAAC,gBACb,EAAKf,QAAQpB,IAAMmC,EAAQC,KAAK,UAChC,EAAKb,SAASvB,IAAQ,EAAKyB,UAAUzB,KAAMmC,EAAQC,KAAK,WACxD,EAAKZ,WAAWxB,IAAMmC,EAAQC,KAAK,YACvC,IAAMrE,EAAOc,IAAO,CACnB2B,MAAO,EAAKtD,MAAM0B,WAAWQ,OAAO,KACpCqB,OAAQC,OAAO,EAAKxD,MAAM0B,WAAWQ,OAAO,OAAO,EACnDrB,KAAMiC,IACJZ,OAAO,YACNiD,EAAkB,EAAKnF,MAAM+C,aAAe,EAAK/C,MAAM+C,YAAY2B,KAAK,SAAA3D,GAAU,OAAIA,EAAWF,KAIrG,OAHAsE,EAAkBA,GAAmBA,EAAgBtE,GAAMU,IAAI,SAAAR,GAC9D,OAAQ,4BAAQ+D,UAAU,aAAajD,IAAKd,GAApC,YAGR,wBAAIc,IAAKiB,EAAKgC,UAAWG,EAAQG,KAAK,MACrC,4BAAQC,KAAK,SAASP,UAAU,cACxBxF,KAAMwD,EAAKtC,QAAS,kBAAM,EAAK0C,SAASJ,KAAOA,GACvD,yBAAKgC,UAAU,mBACbK,MASCG,EAAU,sBAAON,GAAP,YAAkB7C,IAC9BoD,EAAQ,GACRC,EAAO,GACXF,EAAWG,QAAQ,SAACC,EAAMnD,GACf,IAANA,GAAWA,EAAI,IAAM,EACxBiD,EAAKN,KAAKQ,IAEVH,EAAML,KAAKM,IACXA,EAAO,IACFN,KAAKQ,IAGPnD,IAAM+C,EAAWK,OAAS,GAAKJ,EAAML,KAAKM,KAG/C,IAAII,EAAeL,EAAMhE,IAAI,SAACiE,EAAMjD,GACnC,OAAO,wBAAIV,IAAG,eAAUU,IAAMiD,KAG/B,OACC,yBAAKV,UAAU,YACd,6BAASA,UAAU,mBAClB,yBAAKA,UAAU,kBACd,yBAAKA,UAAU,wBAAwBjF,KAAK2C,QAAQuC,eACpD,yBAAKD,UAAU,uBAAf,IAAuCjF,KAAK4C,UAI9C,6BAASqC,UAAU,gBACVrB,aAAc,SAACC,GAAD,OAAO,EAAKD,aAAaC,IACvCG,WAAY,SAACH,GAAD,OAAO,EAAKG,WAAWH,KAC3C,2BAAOoB,UAAU,kBAChB,+BAAO,4BAAKF,IACZ,+BAAQgB,KAIV,6BAASd,UAAU,mBAClB,yBAAKe,IAAKC,IAAMC,IAAI,SACpB,uBAAGjB,UAAU,WAAb,6DACA,uBAAGA,UAAU,eAAb,4C,GA/RkBrE,IAAMC,WCHdsF,EAFSvF,IAAMwF,cAAc,MCoB7BC,MAjBf,WACI,OACI,kBAAC,EAAgBC,SAAjB,KACK,SAAAjI,GAAQ,OACL,yBAAK4G,UAAU,OACX,gCACI,kBAAC,EAAD,CAAQ5G,SAAWA,KAEvB,8BACI,kBAAC,EAAD,CAAUA,SAAWA,SCFvCkI,EAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DAsCN,SAASC,EAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACTK,KAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBnH,QACf6G,UAAUC,cAAcQ,YAI1BvI,QAAQC,IACN,iHAKE4H,GAAUA,EAAOW,UACnBX,EAAOW,SAASN,KAMlBlI,QAAQC,IAAI,sCAGR4H,GAAUA,EAAOY,WACnBZ,EAAOY,UAAUP,UAO5BQ,MAAM,SAAAC,GACL3I,QAAQ2I,MAAM,4CAA6CA,K,oBC7ElDd,G,YAnBA,CACde,OAAQ,0CACRC,WAAY,6BACZC,YAAa,oCACbC,UAAW,aACXC,cAAe,yBACfC,kBAAmB,eACnBC,MAAO,wCCaOC,EAdd,aAAe,IAAD,gCASd/H,OAAS,kBAAM,EAAKE,KAAK8H,mBAAmB,EAAKC,iBATnC,KAWdhI,QAAU,kBAAM,EAAKC,KAAKD,WAVzBiI,IAAIC,cAAc1B,GAElB/G,KAAKQ,KAAOgI,IAAIhI,OAChBR,KAAKtB,GAAK8J,IAAIE,YAEd1I,KAAKuI,eAAiB,IAAIC,IAAIhI,KAAKmI,oBCHrCC,IAASC,OACR,kBAAC,EAAgBC,SAAjB,CAA0BC,MAAO,IAAIV,GACpC,kBAAC,EAAD,OAC4BW,SAASC,eAAe,SHU/C,SAAkBlC,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIkC,IAAIC,uBAAwB1C,OAAOC,SAAS0C,MACpDC,SAAW5C,OAAOC,SAAS2C,OAIvC,OAGF5C,OAAO6C,iBAAiB,OAAQ,WAC9B,IAAMxC,EAAK,UAAMqC,uBAAN,sBAEP5C,IAgEV,SAAiCO,EAAOC,GAEtCwC,MAAMzC,GACHK,KAAK,SAAAqC,GAEJ,IAAMC,EAAcD,EAASE,QAAQ5K,IAAI,gBAEnB,MAApB0K,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5C5C,UAAUC,cAAc4C,MAAM1C,KAAK,SAAAC,GACjCA,EAAa0C,aAAa3C,KAAK,WAC7BV,OAAOC,SAASqD,aAKpBlD,EAAgBC,EAAOC,KAG1Ba,MAAM,WACL1I,QAAQC,IACN,mEArFA6K,CAAwBlD,EAAOC,GAI/BC,UAAUC,cAAc4C,MAAM1C,KAAK,WACjCjI,QAAQC,IACN,gHAMJ0H,EAAgBC,EAAOC,MGjC/BE,K","file":"static/js/main.e3c1e63a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sdgj_horizontal_logo.79e03f6f.png\";","class User {\n\tconstructor(firebase) {\n\t\tthis.firebase = firebase;\n\t}\n\n\tgetUser = async (account) => {\n\t\tif (!account) return;\n\n\t\tconst userRef = this.firebase.db.collection('users').doc(account.email);\n\t\tconst user = await userRef.get();\n\t\ttry {\n\t\t\tif (!user.exists) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\treturn user.data();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t}\n\n\tsetUser = async (account) => {\n\t\tif (!account) return;\n\n\t\tconst userRef = this.firebase.db.collection('users').doc(account.email);\n\t\tconst user = await userRef.get();\n\t\ttry {\n\t\t\tif (!user.exists) {\n\t\t\t\tawait userRef.set({\n\t\t\t\t\tcreatedAt: new Date().getTime(),\n\t\t\t\t\tname: account.displayName || '',\n\t\t\t\t\tisMember: false,\n\t\t\t\t\timageUrl: account.photoURL || ''\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait userRef.set({\n\t\t\t\t\tlastSignedIn: new Date().getTime()\n\t\t\t\t}, { merge: true });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t};\n}\n\nexport default User;","import React from 'react'\nimport User from '../functions/User';\n\nclass Header extends React.Component {\n\tfirebase = this.props.firebase;\n\tstate = {\n\t\tuser: null,\n\t\tisFetching: true\n\t};\n\n\tasync componentDidMount() {\n\t\tawait this.firebase.auth.onAuthStateChanged(this.user);\n\t};\n\n\tuser = async (user) => {\n\t\tawait new User(this.firebase).setUser(user);\n\t\tthis.setState({\n\t\t\tuser,\n\t\t\tisFetching: false\n\t\t});\n\t};\n\n\tsignIn = async () => {\n\t\ttry {\n\t\t\tawait this.firebase.signIn();\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t};\n\n\tsignOut = async () => {\n\t\ttry {\n\t\t\tawait this.firebase.signOut();\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t};\n\n\trender() {\n\t\tif (this.state.isFetching) {\n\t\t\treturn (<div><p>...</p></div>);\n\t\t} else if (this.state.user) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<p>{this.state.user.email || this.state.user.phoneNumber}</p>\n\t\t\t\t\t{/*<button onClick={() => this.signOut()}>나가기</button>*/}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={() => this.signIn()}>입장</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport default Header;","class Attendance {\n\tconstructor(firebase) {\n\t\tthis.firebase = firebase;\n\t}\n\n\tsetAttendance = async (date, user) => {\n\t\tif (!user) return;\n\t\tconst attendanceMemberRef = this.firebase.db\n\t\t\t.collection('attendances').doc(date)\n\t\t\t.collection('members').doc(user.email);\n\t\tconst attendance = await attendanceMemberRef.get();\n\t\ttry {\n\t\t\tif (!attendance.exists) {\n\t\t\t\tawait attendanceMemberRef.set({\n\t\t\t\t\tcreatedAt: new Date().getTime(),\n\t\t\t\t\tisDeleted: false\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait attendanceMemberRef.set({\n\t\t\t\t\tisDeleted: !attendance.data().isDeleted,\n\t\t\t\t\tupdatedAt: new Date().getTime()\n\t\t\t\t}, { merge: true });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t};\n\n\tgetAttendances = async (date) => {\n\t\tconst attendanceMemberRef = this.firebase.db\n\t\t\t.collection('attendances').doc(date).collection('members').where(\"isDeleted\", \"==\", false);\n\t\tconst querySnapshot = await attendanceMemberRef.get();\n\t\tif (!querySnapshot.empty) {\n\t\t\tconst { docs } = querySnapshot;\n\t\t\treturn docs.map(doc => ({ ...doc.data(), email: doc.id }))\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n}\n\nexport default Attendance;","import React from 'react'\nimport moment from 'moment'\nimport 'moment-lunar'\nimport Logo from '../assets/images/sdgj_horizontal_logo.png';\nimport Attendance from '../functions/Attendance';\nimport User from '../functions/User';\n\nclass Calendar extends React.Component {\n\tfirebase = this.props.firebase;\n\n\tstate = {\n\t\tdateObject: moment(),\n\t\tstartX: null,\n\t\tkey: 0\n\t};\n\n\tweekdayShort = moment.weekdaysShort();\n\n\tasync componentDidMount() {\n\t\tconst attendances = await Promise.all(this.daysInMonth().map((day) => this.attendances(day)));\n\t\tthis.setState({\n\t\t\tattendances\n\t\t});\n\t}\n\n\tfirstDayOfMonth = () => {\n\t\tconst { dateObject } = this.state;\n\t\treturn moment(dateObject)\n\t\t\t.startOf('month')\n\t\t\t.format('d');\n\t};\n\n\tdaysInMonth = (dateObject = this.state.dateObject) => {\n\t\treturn new Array(dateObject.daysInMonth()).fill(0).map((num, i) => i + 1);\n\t};\n\n\tmonth = () => {\n\t\treturn this.state.dateObject.format('M');\n\t};\n\n\tyear = () => {\n\t\treturn this.state.dateObject.format('Y');\n\t};\n\n\tonPrev = async () => {\n\t\tconst dateObject = this.state.dateObject.subtract(1, 'month');\n\t\tconst attendances = await Promise.all(this.daysInMonth(dateObject).map((day) => this.attendances(day)));\n\t\tthis.setState({\n\t\t\tdateObject: dateObject,\n\t\t\tattendances\n\t\t});\n\t};\n\n\tonNext = async () => {\n\t\tconst dateObject = this.state.dateObject.add(1, 'month');\n\t\tconst attendances = await Promise.all(this.daysInMonth(dateObject).map((day) => this.attendances(day)));\n\t\tthis.setState({\n\t\t\tdateObject: dateObject,\n\t\t\tattendances\n\t\t});\n\t};\n\n\tonAttend = async (d) => {\n\t\tconst account = await this.firebase.auth.currentUser;\n\t\tconst user = await new User(this.firebase).getUser(account);\n\n\t\tif (!account || !user || !user.isMember) {\n\t\t\talert('누구세요..?');\n\t\t} else {\n\t\t\tconst { dateObject } = this.state;\n\t\t\tconst date = moment({\n\t\t\t\tyears: dateObject.format('Y'),\n\t\t\t\tmonths: Number(dateObject.format('MM'))-1,\n\t\t\t\tdate: d\n\t\t\t}).format('YYYYMMDD');\n\t\t\tawait new Attendance(this.firebase).setAttendance(date, account);\n\t\t\tconst attendances = await Promise.all(this.daysInMonth().map((day) => this.attendances(day)));\n\t\t\tthis.setState({\n\t\t\t\tattendances\n\t\t\t});\n\t\t}\n\t};\n\n\tonTouchStart = (e) => {\n\t\tthis.setState({\n\t\t\tstartX: e.targetTouches[0].clientX\n\t\t});\n\t};\n\n\tonTouchEnd = (e) => {\n\t\tconst { startX } = this.state;\n\t\tconst currentX = e.changedTouches[0].clientX;\n\t\tif (Math.abs(currentX - startX ) > 130) {\n\t\t\tcurrentX - startX > 0 ? this.onPrev() : this.onNext();\n\t\t}\n\t\tthis.setState({\n\t\t\tstartX: null\n\t\t});\n\t};\n\n\tisToday = (d) => {\n\t\tconst { dateObject } = this.state;\n\t\tconst day = moment({\n\t\t\tyears: dateObject.format('Y'),\n\t\t\tmonths: Number(dateObject.format('MM'))-1,\n\t\t\tdate: d\n\t\t});\n\t\tconst today = moment().format('YYYY-MM-DD');\n\t\treturn !!day.isSame(today)\n\t};\n\n\tisSunday = (d) => {\n\t\tconst { dateObject } = this.state;\n\t\tconst day = moment({\n\t\t\tyears: dateObject.format('Y'),\n\t\t\tmonths: Number(dateObject.format('MM'))-1,\n\t\t\tdate: d\n\t\t}).day();\n\t\treturn day === 0;\n\t};\n\n\tisSaturday = (d) => {\n\t\tconst { dateObject } = this.state;\n\t\tconst day = moment({\n\t\t\tyears: dateObject.format('Y'),\n\t\t\tmonths: Number(dateObject.format('MM'))-1,\n\t\t\tdate: d\n\t\t}).day();\n\t\treturn day === 6;\n\t};\n\n\tisHoliday = (d) => {\n\t\tconst { dateObject } = this.state;\n\t\t// TODO 대체 공휴일\n\t\tconst holidays = [\n\t\t\t// 신정\n\t\t\tmoment({ years: this.year(), months: 0, date: 1}),\n\t\t\t// 설날\n\t\t\tmoment({ years: this.year(), months: 0, date: 1}).solar(),\n\t\t\tmoment({ years: this.year(), months: 0, date: 1}).solar().subtract(1, 'day'),\n\t\t\tmoment({ years: this.year(), months: 0, date: 1}).solar().add(1, 'day'),\n\t\t\t// 3.1\n\t\t\tmoment({ years: this.year(), months: 2, date: 1}),\n\t\t\t// 어린이날\n\t\t\tmoment({ years: this.year(), months: 4, date: 5}),\n\t\t\t// 부처님 오신날\n\t\t\tmoment({ years: this.year(), months: 4, date: 12}),\n\t\t\t// 현충일\n\t\t\tmoment({ years: this.year(), months: 5, date: 6}),\n\t\t\t// 광복절\n\t\t\tmoment({ years: this.year(), months: 7, date: 15}),\n\t\t\t// 추석\n\t\t\tmoment({ years: this.year(), months: 7, date: 15}).solar(),\n\t\t\tmoment({ years: this.year(), months: 7, date: 15}).solar().subtract(1, 'day'),\n\t\t\tmoment({ years: this.year(), months: 7, date: 15}).solar().add(1, 'day'),\n\t\t\t// 개천절\n\t\t\tmoment({ years: this.year(), months: 9, date: 3}),\n\t\t\t// 한글날\n\t\t\tmoment({ years: this.year(), months: 9, date: 9}),\n\t\t\t// 크리스마스\n\t\t\tmoment({ years: this.year(), months: 11, date: 25}),\n\t\t];\n\t\tconst day = moment({\n\t\t\tyears: dateObject.format('Y'),\n\t\t\tmonths: Number(dateObject.format('MM'))-1,\n\t\t\tdate: d\n\t\t});\n\t\treturn !!holidays.find((holiday) => holiday.isSame(day));\n\t};\n\n\tattendances = async (d) => {\n\t\tconst { dateObject } = this.state;\n\t\tconst date = moment({\n\t\t\tyears: dateObject.format('Y'),\n\t\t\tmonths: Number(dateObject.format('MM'))-1,\n\t\t\tdate: d\n\t\t}).format('YYYYMMDD');\n\t\tconst attendances = await new Attendance(this.firebase).getAttendances(date);\n\t\treturn {\n\t\t\t[date]: attendances\n\t\t};\n\t};\n\n\trender() {\n\t\tlet weekdaysName = this.weekdayShort.map((day, i) => {\n\t\t\tlet chineseWeekday = '';\n\t\t\tswitch (i) {\n\t\t\t\tcase 0:\n\t\t\t\t\tchineseWeekday = '日';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tchineseWeekday = '月';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tchineseWeekday = '火';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tchineseWeekday = '水';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tchineseWeekday = '木';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tchineseWeekday = '金';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tchineseWeekday = '土';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<th key={day} className=\"calendar-week-day\">\n\t\t\t\t\t<p className=\"ch\">{chineseWeekday}</p>\n\t\t\t\t\t<p className=\"en\">{day.toUpperCase()}</p>\n\t\t\t\t</th>\n\t\t\t);\n\t\t});\n\n\t\tconst blanks = new Array(Number(this.firstDayOfMonth())).fill(0).map((num, i) => {\n\t\t\treturn (\n\t\t\t\t<td key={`blank-${i}`} className=\"calendar-day blank\">{''}</td>\n\t\t\t);\n\t\t});\n\n\t\tconst daysInMonth = this.daysInMonth().map(day => {\n\t\t\t// set class\n\t\t\tconst classes = ['calendar-day'];\n\t\t\tif (this.isToday(day)) classes.push('today');\n\t\t\tif (this.isSunday(day) || this.isHoliday(day)) classes.push('holiday');\n\t\t\tif (this.isSaturday(day)) classes.push('saturday');\n\t\t\tconst date = moment({\n\t\t\t\tyears: this.state.dateObject.format('Y'),\n\t\t\t\tmonths: Number(this.state.dateObject.format('MM'))-1,\n\t\t\t\tdate: day\n\t\t\t}).format('YYYYMMDD');\n\t\t\tlet todayAttendance = this.state.attendances && this.state.attendances.find(attendance => attendance[date]);\n\t\t\ttodayAttendance = todayAttendance && todayAttendance[date].map(attendance => {\n\t\t\t\treturn (<button className=\"attendance\" key={attendance}>출</button>);\n\t\t\t});\n\t\t\treturn (\n\t\t\t\t<td key={day} className={classes.join(' ')}>\n\t\t\t\t\t<button type=\"button\" className=\"btn-attend \"\n\t\t\t\t\t        name={day} onClick={() => this.onAttend(day)}>{day}</button>\n\t\t\t\t\t<div className=\"attendance-area\">\n\t\t\t\t\t\t{todayAttendance}\n\t\t\t\t\t{/*\t<button className=\"attendance\">준</button>*/}\n\t\t\t\t\t{/*\t<button className=\"attendance\">수</button>*/}\n\t\t\t\t\t{/*\t<button className=\"attendance\">환</button>*/}\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t);\n\t\t});\n\n\t\tconst totalCells = [...blanks, ...daysInMonth];\n\t\tlet weeks = [];\n\t\tlet week = [];\n\t\ttotalCells.forEach((cell, i) => {\n\t\t\tif (i === 0 || i % 7 !== 0) {\n\t\t\t\tweek.push(cell);\n\t\t\t} else { // new week\n\t\t\t\tweeks.push(week);\n\t\t\t\tweek = [];\n\t\t\t\tweek.push(cell);\n\t\t\t}\n\t\t\t// last day\n\t\t\tif (i === totalCells.length - 1) { weeks.push(week); }\n\t\t});\n\n\t\tlet weeksInMonth = weeks.map((week, i) => {\n\t\t\treturn <tr key={`week-${i}`}>{week}</tr>;\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"calendar\">\n\t\t\t\t<section className=\"calendar-header\">\n\t\t\t\t\t<div className=\"calendar-label\">\n\t\t\t\t\t\t<div className=\"calendar-label-month\">{this.month().toUpperCase()}</div>\n\t\t\t\t\t\t<div className=\"calendar-label-year\"> {this.year()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<section className=\"calendar-body\"\n\t\t\t\t         onTouchStart={(e) => this.onTouchStart(e)}\n\t\t\t\t         onTouchEnd={(e) => this.onTouchEnd(e)} >\n\t\t\t\t\t<table className=\"calendar-table\">\n\t\t\t\t\t\t<thead><tr>{weekdaysName}</tr></thead>\n\t\t\t\t\t\t<tbody>{weeksInMonth}</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</section>\n\n\t\t\t\t<section className=\"calendar-footer\">\n\t\t\t\t\t<img src={Logo} alt=\"logo\" />\n\t\t\t\t\t<p className=\"address\">서울 마포구 서교동 358-93</p>\n\t\t\t\t\t<p className=\"copy-rights\">© 2019 시대공작</p>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Calendar;","import React from 'react';\n\nconst FirebaseContext = React.createContext(null);\n\nexport default FirebaseContext;","import React from 'react';\nimport Header from './components/Header';\nimport Calendar from './components/Calendar';\nimport FirebaseContext from \"./context/FirebaseContext\";\n\nfunction App() {\n    return (\n        <FirebaseContext.Consumer>\n            {firebase =>\n                <div className=\"App\">\n                    <header>\n                        <Header firebase={ firebase }/>\n                    </header>\n                    <main>\n                        <Calendar firebase={ firebase } />\n                    </main>\n                </div>\n            }\n        </FirebaseContext.Consumer>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const config = {\n\tapiKey: \"AIzaSyCucVu9k4l944a0FrnsfUD3Zi-4ZvwMvjk\",\n\tauthDomain: \"sdgj-ffd0b.firebaseapp.com\",\n\tdatabaseURL: \"https://sdgj-ffd0b.firebaseio.com\",\n\tprojectId: \"sdgj-ffd0b\",\n\tstorageBucket: \"sdgj-ffd0b.appspot.com\",\n\tmessagingSenderId: \"736755019580\",\n\tappId: \"1:736755019580:web:b8f5a87042a028b5\"\n};\n//\n// const config = {\n// \tapiKey: process.env.REACT_APP_API_KEY,\n// \tauthDomain: process.env.REACT_APP_AUTH_DOMAIN,\n// \tdatabaseURL: process.env.REACT_APP_DATABASE_URL,\n// \tprojectId: process.env.REACT_APP_PROJECT_ID,\n// \tstorageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n// \tmessagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n// };\n\nexport default config;\n","import app from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport config from './firebase-config'\n\nclass Firebase {\n\tconstructor() {\n\t\tapp.initializeApp(config);\n\n\t\tthis.auth = app.auth();\n\t\tthis.db = app.firestore();\n\n\t\tthis.googleProvider = new app.auth.GoogleAuthProvider();\n\t}\n\n\tsignIn = () => this.auth.signInWithRedirect(this.googleProvider);\n\n\tsignOut = () => this.auth.signOut();\n}\n\nexport default Firebase;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport Firebase from './firebase'\nimport FirebaseContext from './context/FirebaseContext'\n\nReactDOM.render(\n\t<FirebaseContext.Provider value={new Firebase()}>\n\t\t<App />\n\t</FirebaseContext.Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}